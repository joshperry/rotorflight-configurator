import"../../modulepreload-polyfill.js";const y=16,w=0,p=0,g="/images/icons/cf_icon_position.png",L="/images/icons/cf_icon_position_nofix.png";let c,s,o,a,r,n;window.onload=_;function _(){const e=ol.proj.fromLonLat([w,p]);o=new ol.View({center:e,zoom:y}),s=new ol.Map({target:"map-canvas",layers:[new ol.layer.Tile({source:new ol.source.OSM})],view:o,controls:[]});const t=new ol.style.Icon({anchor:[.5,1],opacity:1,scale:.5,src:g}),i=new ol.style.Icon({anchor:[.5,1],opacity:1,scale:.5,src:L});a=new ol.style.Style({image:t}),r=new ol.style.Style({image:i}),c=new ol.geom.Point(e),n=new ol.Feature({geometry:c}),n.setStyle(a);const l=new ol.source.Vector({features:[n]}),m=new ol.layer.Vector({source:l});s.addLayer(m),window.addEventListener("message",u)}function u(e){try{switch(e.data.action){case"zoom_in":o.setZoom(o.getZoom()+1);break;case"zoom_out":o.setZoom(o.getZoom()-1);break;case"center":{n.setStyle(a);const t=ol.proj.fromLonLat([e.data.lon,e.data.lat]);o.setCenter(t),c.setCoordinates(t);break}case"nofix":n.setStyle(r);break}}catch(t){console.log(`Map error ${t}`)}}
