import"../../modulepreload-polyfill.js";import{w as V,i as y,D as x}from"../../slider.js";const i=1e3,l=1500,u=2e3,p=["Roll","Pitch","Yaw","Collective","Throttle","Aux1","Aux2","Aux3"],c=[l,l,l,l,i,i,i,i],a=[[2,3],[0,1]];var d,f,C=!1;const r=window.i18n,E={darkTheme:t=>{t?x.applyDark():x.applyNormal()}};$(document).ready(function(){$("[i18n]:not(.i18n-replaced)").each(function(){const t=$(this);t.html(r.getMessage(t.attr("i18n"))),t.addClass("i18n-replaced")}),V.bindWatchers(window,E)});function T(){for(const t in a){const n=d.get(t),e=a[t][0],o=a[t][1];$(".gimbal-label-horz",n).text(r.getMessage("controlAxis"+p[e])),$(".gimbal-label-vert",n).text(r.getMessage("controlAxis"+p[o]))}$(".slider-label",f.get(0)).text(r.getMessage("controlAxisThr"));for(let t=1;t<4;t++)$(".slider-label",f.get(t)).text(r.getMessage("controlAxisAux"+t))}function z(){C&&(window.setRawRx(c)||nw.Window.get().close())}function w(t){return t=Math.min(Math.max(t,0),1),Math.round(t*(u-i)+i)}function b(t){return t=Math.min(Math.max(t,i),u),(t-i)/(u-i)}function M(t,n,e){const o=$(t).width(),s=$(".control-stick",t);s.css("top",(1-b(e))*o+"px"),s.css("left",b(n)*o+"px")}function A(t,n,e){const o=t.offset(),s=t.width(),h=a[n][0],N=a[n][1],m=w(1-(e.pageY-o.top)/s),g=w((e.pageX-o.left)/s);c[h]=g,c[N]=m,M(t,g,m)}function k(t,n){const e=a[n][0],o=a[n][1],s=l,h=l;c[e]=h,c[o]=s,M(t,h,s)}function L(){for(const t in a){const n=d.get(t);k(n,t)}}$(document).ready(function(){$(".button-enable .btn").click(function(){const t=$(".warning").height()+25;$(".warning").slideUp("short",function(){nw.Window.get().resizeBy(0,-t)}),C=!0}),d=$(".control-gimbal"),f=$(".control-slider"),d.each(function(t){const n=$(this);n.on("mousemove",function(e){e.buttons==1&&A(n,t,e)}),n.on("click",function(e){A(n,t,e)}),n.on("dblclick",function(){k(n,t)})}),$(".slider",f).each(function(t){y($(this).get(0),{start:i,range:{min:i,max:u}}).on("slide",e=>{const o=Math.round(parseFloat(e[0]));c[t+4]=o,$(".tooltip",this).text(o)}),$(this).append('<div class="tooltip"></div>'),$(".tooltip",this).text(i)}),T(),L(),setInterval(z,50)});
