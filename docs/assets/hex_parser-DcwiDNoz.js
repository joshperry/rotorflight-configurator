(function(){"use strict";function p(e){e=e.split(`
`),e[e.length-1]==""&&e.pop();let o=!0;const s={data:[],end_of_file:!1,bytes_total:0,start_linear_address:0};let u=0,l=0;for(let t=0;t<e.length&&o;t++){const r=parseInt(e[t].substr(1,2),16),c=parseInt(e[t].substr(3,4),16),f=parseInt(e[t].substr(7,2),16),n=e[t].substr(9,r*2),I=parseInt(e[t].substr(9+r*2,2),16);switch(f){case 0:{(c!==l||l===0)&&s.data.push({address:u+c,bytes:0,data:[]}),l=c+r;let a=r+parseInt(e[t].substr(3,2),16)+parseInt(e[t].substr(5,2),16)+f;for(let d=0;d<r*2;d+=2){const _=parseInt(n.substr(d,2),16),b=s.data.length-1;s.data[b].data.push(_),s.data[b].bytes++,a+=_,s.bytes_total++}a=~a+1&255,a!=I&&(o=!1);break}case 1:s.end_of_file=!0;break;case 2:parseInt(n,16)!=0&&console.log("extended segment address record found - NOT IMPLEMENTED !!!");break;case 3:parseInt(n,16)!=0&&console.log("start segment address record found - NOT IMPLEMENTED !!!");break;case 4:u=(parseInt(n.substr(0,2),16)<<24|parseInt(n.substr(2,2),16)<<16)>>>0;break;case 5:s.start_linear_address=parseInt(n,16);break}}s.end_of_file&&o?postMessage(s):postMessage(null)}const i="HEX_PARSER - File parsed in";onmessage=function(e){console.time(i),p(e.data),console.timeEnd(i),close()}})();
